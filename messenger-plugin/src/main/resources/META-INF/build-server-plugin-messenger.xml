<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns              = "http://www.springframework.org/schema/beans"
       default-autowire   = "constructor"
       xmlns:xsi          = "http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation = "http://www.springframework.org/schema/beans
                             http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <!-- Utility beans -->
    <bean id="messagesContext"           class="com.goldin.plugins.teamcity.messenger.impl.MessagesContextImpl"/>
    <bean id="messagesConfiguration"     class="com.goldin.plugins.teamcity.messenger.impl.MessagesConfigurationImpl"/>
    <bean id="messagesUtil"              class="com.goldin.plugins.teamcity.messenger.api.MessagesUtil"/>

    <!-- Working beans -->
    <bean id="messagesTable"             class="com.goldin.plugins.teamcity.messenger.impl.MessagesTableImpl"/>
    <bean id="usersTable"                class="com.goldin.plugins.teamcity.messenger.impl.UsersTableImpl"/>
    <bean id="messagesPersistency"       class="com.goldin.plugins.teamcity.messenger.impl.MessagesPersistencyImpl"/>
    <bean id="messagesBean"              class="com.goldin.plugins.teamcity.messenger.impl.MessagesBeanImpl"/>

    <!-- UI Controllers -->
    <bean id="messagesDisplayController" class="com.goldin.plugins.teamcity.messenger.controller.MessagesDisplayController"/>
    <bean id="messagesSendController"    class="com.goldin.plugins.teamcity.messenger.controller.MessagesSendController"/>

    <!-- UI Extensions -->
    <bean id="messagesDisplayExtension"  class="com.goldin.plugins.teamcity.messenger.extension.MessagesDisplayExtension"/>
    <bean id="messagesSendExtension"     class="com.goldin.plugins.teamcity.messenger.extension.MessagesSendExtension"/>

    <!-- Longevity cleanup task, runs every 10 minutes -->
    <bean class="org.springframework.scheduling.timer.TimerFactoryBean">
        <property name="scheduledTimerTasks">
            <list>
                <bean class="org.springframework.scheduling.timer.ScheduledTimerTask">
                    <property name  = "period"
                              value = "600000"/>
                    <property name  = "timerTask">
                        <bean class = "com.goldin.plugins.teamcity.messenger.impl.LongevityCleanupTask"/>
                    </property>
                </bean>
            </list>
        </property>
        <property name="daemon" value="true"/>
    </bean>

</beans>
