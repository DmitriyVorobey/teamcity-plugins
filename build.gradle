allprojects {
    apply plugin: 'idea'
    apply plugin: 'groovy'
    apply plugin: 'maven'

    group               = 'com.goldin.teamcity'
    version             = '0.0.1-SNAPSHOT'
    sourceCompatibility = 1.6

    defaultTasks 'clean', 'build', 'install'
}


subprojects {
    groovyVersion = '1.8.0'

    repositories { mavenRepo urls: 'http://evgeny-goldin.org/artifactory/repo/' }
    dependencies {
        groovy  "org.codehaus.groovy:groovy-all:$groovyVersion"
        compile 'jetbrains:teamcity-openapi:6.5',
                'org.springframework:spring-webmvc:3.0.5.RELEASE',
                'javax:javaee-api:6.0',
                'com.intellij:annotations:7.0.3',
                'com.intellij:openapi:7.0.3',
                'jdom:jdom:1.0'
    }

    ideaProject.javaVersion = '1.6.0_25'
    ideaModule {
        javaVersion     = ideaProject.javaVersion
        downloadSources = true
        downloadJavadoc = true
        outputDir       = new File( project.buildDir, 'idea' )
        testOutputDir   = new File( project.buildDir, 'idea/test' )
    }

    tasks.withType( Compile ) {
        options.debug        =  true
        options.compilerArgs << '-Xlint:all'
    }

    test {
        test.testReportDir    = new File(( File ) project.buildDir, 'test/reports' )
        test.testResultsDir   = new File(( File ) project.buildDir, 'test/results' )
    }
}